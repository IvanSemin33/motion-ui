{"version":3,"file":"index-553ddef6.js","sources":["../../src/utils/common.ts","../../src/components/Popper/index.tsx"],"sourcesContent":["export const getElementZPosition = (anchorEl: HTMLElement | null): number => {\n  if (anchorEl) {\n    const parent = anchorEl.parentElement\n    const zIndex = window.getComputedStyle(anchorEl).zIndex\n\n    return zIndex === 'auto' ? getElementZPosition(parent) : Number(zIndex)\n  }\n\n  return 0\n}\n","import classNames from 'classnames'\nimport { AnimatePresence, HTMLMotionProps, motion, MotionStyle } from 'framer-motion'\nimport { createPortal } from 'react-dom'\n\nimport styles from './index.module.scss'\n\nimport { getElementZPosition } from '../../utils/common'\nimport wrapper from '../../utils/wrapper'\n\nexport enum EPopperPosition {\n  TOP = 'top',\n  TOP_LEFT = 'top-left',\n  TOP_RIGHT = 'top-right',\n  BOTTOM = 'bottom',\n  BOTTOM_LEFT = 'bottom-left',\n  BOTTOM_RIGHT = 'bottom-right',\n  LEFT = 'left',\n  RIGHT = 'right',\n}\n\nexport interface IPopperOwnProps extends HTMLMotionProps<'div'> {\n  anchorEl: HTMLElement | null\n  //  FIXME: sometimes can't use arrow prop\n  arrow?: boolean\n  children?: React.ReactNode\n  fixed?: boolean\n  fullWidth?: boolean\n  open?: boolean\n  position?: EPopperPosition\n}\n\ntype PopperPosition = {\n  top?: number\n  left?: number\n  right?: number\n  translateX: string\n  translateY: string\n  zIndex: number\n}\n\nexport type TPopperRef = HTMLDivElement\n\nconst Popper = wrapper<TPopperRef, IPopperOwnProps>(\n  (\n    { fixed, arrow, open, anchorEl, children, position, className, fullWidth, ...containerProps },\n    ref\n  ) => {\n    const getPopperPosition = (): PopperPosition => {\n      const cords = anchorEl?.getBoundingClientRect()\n\n      const scrollY = window.scrollY\n      const scrollX = window.scrollX\n\n      const { width = 0, height = 0, top = 0, bottom = 0, left = 0, right = 0 } = cords || {}\n\n      const anchorZIndex = getElementZPosition(anchorEl) + 10\n\n      const anchorWidth = width\n      const anchorHeight = height\n\n      const anchorTop = fixed ? top : top + scrollY\n      const anchorBottom = fixed ? bottom : bottom + scrollY\n      const anchorLeft = fixed ? left : left + scrollX\n      const anchorRight = fixed ? right : right + scrollX\n\n      const anchorHorizontalCenter = anchorLeft + anchorWidth / 2\n      const anchorVerticalCenter = anchorTop + anchorHeight / 2\n\n      const arrowPadding = arrow ? '8px' : '2px'\n\n      switch (position) {\n        case EPopperPosition.TOP:\n          return {\n            top: anchorTop,\n            left: anchorHorizontalCenter,\n            translateX: '-50%',\n            translateY: `calc(-100% - ${arrowPadding})`,\n            zIndex: anchorZIndex,\n          }\n        case EPopperPosition.TOP_LEFT:\n          return {\n            top: anchorTop,\n            right: anchorHorizontalCenter,\n            translateX: '0',\n            translateY: `calc(-100% - ${arrowPadding})`,\n            zIndex: anchorZIndex,\n          }\n        case EPopperPosition.TOP_RIGHT:\n          return {\n            top: anchorTop,\n            left: anchorHorizontalCenter,\n            translateX: '0',\n            translateY: `calc(-100% - ${arrowPadding})`,\n            zIndex: anchorZIndex,\n          }\n        case EPopperPosition.BOTTOM:\n          return {\n            top: anchorBottom,\n            left: anchorHorizontalCenter,\n            translateX: '-50%',\n            translateY: `${arrowPadding}`,\n            zIndex: anchorZIndex,\n          }\n        case EPopperPosition.BOTTOM_LEFT:\n          return {\n            top: anchorBottom,\n            left: anchorHorizontalCenter,\n            translateX: '-100%',\n            translateY: `${arrowPadding}`,\n            zIndex: anchorZIndex,\n          }\n        case EPopperPosition.BOTTOM_RIGHT:\n          return {\n            top: anchorBottom,\n            left: anchorHorizontalCenter,\n            translateX: '0',\n            translateY: `${arrowPadding}`,\n            zIndex: anchorZIndex,\n          }\n        case EPopperPosition.LEFT:\n          return {\n            top: anchorVerticalCenter,\n            right: anchorRight,\n            translateX: `-${arrowPadding}`,\n            translateY: '-50%',\n            zIndex: anchorZIndex,\n          }\n        case EPopperPosition.RIGHT:\n          return {\n            top: anchorVerticalCenter,\n            left: anchorRight,\n            translateX: `${arrowPadding}`,\n            translateY: '-50%',\n            zIndex: anchorZIndex,\n          }\n        default:\n          return {\n            top: anchorBottom,\n            left: anchorHorizontalCenter,\n            translateX: '-50%',\n            translateY: `${arrowPadding}`,\n            zIndex: anchorZIndex,\n          }\n      }\n    }\n\n    const mergePositions = (position: PopperPosition, style: MotionStyle) => {\n      const { top, left, right, transform, zIndex } = style\n\n      return {\n        ...style,\n        top: top !== undefined ? top : position.top,\n        left: left !== undefined ? left : position.left,\n        right: right !== undefined ? right : position.right,\n        transform:\n          transform !== undefined\n            ? transform\n            : `translate(${position.translateX}, ${position.translateY})`,\n        zIndex: zIndex !== undefined ? zIndex : position.zIndex,\n      }\n    }\n\n    const getWidth = () => {\n      const cords = anchorEl?.getBoundingClientRect()\n      return fullWidth ? cords?.width : 'auto'\n    }\n\n    return createPortal(\n      <AnimatePresence>\n        {open && (\n          <motion.div\n            ref={ref}\n            key=\"popper\"\n            className={classNames(\n              styles.container,\n              position && styles[position],\n              arrow && styles.arrow,\n              className\n            )}\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            {...containerProps}\n            style={{\n              width: getWidth(),\n              position: fixed ? 'fixed' : 'absolute',\n              ...mergePositions(getPopperPosition(), containerProps.style || {}),\n            }}\n          >\n            {children}\n          </motion.div>\n        )}\n      </AnimatePresence>,\n      document.body\n    )\n  }\n)\n\nPopper.defaultProps = {\n  open: false,\n  anchorEl: null,\n  position: EPopperPosition.BOTTOM,\n  arrow: false,\n}\n\nexport interface IPopperProps extends React.ComponentProps<typeof Popper> {}\n\nexport default Popper\n"],"names":["getElementZPosition","anchorEl","parent","zIndex","EPopperPosition","EPopperPosition2","Popper","wrapper","fixed","arrow","open","children","position","className","fullWidth","containerProps","ref","getPopperPosition","cords","scrollY","scrollX","width","height","top","bottom","left","right","anchorZIndex","anchorWidth","anchorHeight","anchorTop","anchorBottom","anchorLeft","anchorRight","anchorHorizontalCenter","anchorVerticalCenter","arrowPadding","mergePositions","position2","style","transform","getWidth","createPortal","jsx","AnimatePresence","motion","classNames","styles","Popper$1"],"mappings":"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"}