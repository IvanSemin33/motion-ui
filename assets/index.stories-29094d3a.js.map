{"version":3,"file":"index.stories-29094d3a.js","sources":["../../src/components/DateRangePicker/index.tsx"],"sourcesContent":["import { useCallback, useMemo, useState } from 'react'\n\nimport { format, Locale } from 'date-fns'\nimport { enGB } from 'date-fns/locale'\nimport { camelCase } from 'lodash'\nimport {\n  DateRange as DateRangeComponent,\n  DateRangePicker as DateRangePickerComponent,\n  DateRangePickerProps as DateRangePickerComponentProps,\n  defaultStaticRanges,\n  Range,\n} from 'react-date-range'\n\nimport DatePickerBase, {\n  EDatePickerBaseLabelPlacements,\n  EDatePickerBaseTypes,\n  EDatePickerBaseVariants,\n  IDatePickerBaseProps,\n} from '../../core/DatePickerBase'\nimport wrapper from '../../utils/wrapper'\n\nexport const EDateRangePickerLabelPlacements = EDatePickerBaseLabelPlacements\nexport type EDateRangePickerLabelPlacements = EDatePickerBaseLabelPlacements\n\nexport const EDateRangePickerVariants = EDatePickerBaseVariants\nexport type EDateRangePickerVariants = EDatePickerBaseVariants\n\ntype TStaticRangesLabels = {\n  today: string\n  yesterday: string\n  thisWeek: string\n  lastWeek: string\n  thisMonth: string\n  lastMonth: string\n}\n\nexport interface IDateRangePickerOwnProps\n  extends Omit<\n    IDatePickerBaseProps,\n    | 'onChange'\n    | 'value'\n    | 'type'\n    | 'calendar'\n    | 'setStartDateInputValue'\n    | 'setEndDateInputValue'\n    | 'startDateInputValue'\n    | 'endDateInputValue'\n  > {\n  onChange: (value: Range[]) => void\n  value: Range[]\n  staticRanges?: boolean\n  staticRangesLabels?: TStaticRangesLabels\n  labelPlacement?: EDateRangePickerLabelPlacements\n  variant?: EDateRangePickerVariants\n  locale?: Locale\n}\n\nexport type TDateRangePickerRef = HTMLDivElement\n\nconst DateRangePicker = wrapper<TDateRangePickerRef, IDateRangePickerOwnProps>(\n  ({ staticRanges, staticRangesLabels, onChange, value, locale, ...calendarProps }) => {\n    const [startDateInputValue, setStartDateInputValue] = useState<string>(\n      value[0].startDate ? format(value[0].startDate, 'dd.MM.yyyy') : ''\n    )\n\n    const [endDateInputValue, setEndDateInputValue] = useState<string>(\n      value[0].endDate ? format(value[0].endDate, 'dd.MM.yyyy') : ''\n    )\n\n    const customStaticRanges = useMemo(\n      () =>\n        staticRanges\n          ? defaultStaticRanges.map((range) => {\n              if (\n                staticRangesLabels &&\n                range.label &&\n                camelCase(range.label) in staticRangesLabels\n              ) {\n                return {\n                  ...range,\n                  label: staticRangesLabels[camelCase(range.label) as keyof TStaticRangesLabels],\n                }\n              }\n              return range\n            })\n          : [],\n      [staticRanges, staticRangesLabels]\n    )\n\n    const onChangeRangeCalendar = useCallback(\n      (ranges: Range[]) => {\n        onChange(ranges)\n        setStartDateInputValue(ranges[0].startDate ? format(ranges[0].startDate, 'dd.MM.yyyy') : '')\n        setEndDateInputValue(ranges[0].endDate ? format(ranges[0].endDate, 'dd.MM.yyyy') : '')\n      },\n      [onChange]\n    )\n\n    const reactDateRangeProps = useMemo(() => {\n      return {\n        showDateDisplay: false,\n        locale,\n        weekdayDisplayFormat: 'EEEEEE',\n        onChange: (item) => onChangeRangeCalendar([item.selection]),\n        ranges: value.length\n          ? value\n          : [\n              {\n                startDate: new Date(),\n                endDate: undefined,\n                key: 'selection',\n              },\n            ],\n        staticRanges: customStaticRanges,\n        inputRanges: [],\n      } as DateRangePickerComponentProps\n    }, [value, locale, customStaticRanges, onChangeRangeCalendar])\n\n    return (\n      <DatePickerBase\n        {...calendarProps}\n        type={EDatePickerBaseTypes.RANGE}\n        calendar={\n          staticRanges ? (\n            <DateRangePickerComponent {...reactDateRangeProps} />\n          ) : (\n            <DateRangeComponent {...reactDateRangeProps} />\n          )\n        }\n        setStartDateInputValue={setStartDateInputValue}\n        startDateInputValue={startDateInputValue}\n        setEndDateInputValue={setEndDateInputValue}\n        endDateInputValue={endDateInputValue}\n        onChange={(value) => onChange(value as Range[])}\n        value={value}\n      />\n    )\n  }\n)\n\nDateRangePicker.defaultProps = {\n  staticRanges: false,\n  locale: enGB,\n}\n\nexport interface IDateRangePickerProps extends React.ComponentProps<typeof DateRangePicker> {}\n\nexport default DateRangePicker\n"],"names":["EDateRangePickerLabelPlacements","EDatePickerBaseLabelPlacements","EDateRangePickerVariants","EDatePickerBaseVariants","DateRangePicker","wrapper","staticRanges","staticRangesLabels","onChange","value","locale","calendarProps","startDateInputValue","setStartDateInputValue","useState","format","endDateInputValue","setEndDateInputValue","customStaticRanges","useMemo","defaultStaticRanges","range","camelCase","onChangeRangeCalendar","useCallback","ranges","reactDateRangeProps","item","jsx","DatePickerBase","EDatePickerBaseTypes","DateRangePickerComponent","DateRangeComponent","value2","enGB"],"mappings":"glBAqBO,MAAAA,EAAAC,GAGAC,EAAAC,GAmCPC,EAAAC,GAAwB,CAAA,CAAA,aAAAC,EAAA,mBAAAC,EAAA,SAAAC,EAAA,MAAAC,EAAA,OAAAC,EAAA,GAAAC,MAAA,CAEpB,KAAA,CAAAC,GAAAC,CAAA,EAAAC,EAAA,SAAsDL,EAAA,CAAA,EAAA,UAAAM,EAAAN,EAAA,CAAA,EAAA,UAAA,YAAA,EAAA,EACY,EAGlE,CAAAO,GAAAC,CAAA,EAAAH,EAAA,SAAkDL,EAAA,CAAA,EAAA,QAAAM,EAAAN,EAAA,CAAA,EAAA,QAAA,YAAA,EAAA,EACY,EAG9DS,EAAAC,EAAA,QAA2B,IAAAb,EAAAc,EAAAA,oBAAA,IAAAC,GAIjBd,GAAAc,EAAA,OAAAC,EAAA,UAAAD,EAAA,KAAA,IAAAd,EAKE,CAAO,GAAAc,EACF,MAAAd,EAAAe,EAAAA,UAAAD,EAAA,KAAA,CAAA,CAC0E,EAGjFA,CAAO,EAAA,CAAA,EAER,CAAAf,EAAAC,CAAA,CAC0B,EAGnCgB,EAAAC,EAAA,YAA8BC,GAAA,CAE1BjB,EAAAiB,CAAA,EACAZ,EAAAY,EAAA,CAAA,EAAA,UAAAV,EAAAU,EAAA,CAAA,EAAA,UAAA,YAAA,EAAA,EAAA,EACAR,EAAAQ,EAAA,CAAA,EAAA,QAAAV,EAAAU,EAAA,CAAA,EAAA,QAAA,YAAA,EAAA,EAAA,CAAqF,EACvF,CAAAjB,CAAA,CACS,EAGXkB,EAAAP,EAAAA,QAAA,KACE,CAAO,gBAAA,GACY,OAAAT,EACjB,qBAAA,SACsB,SAAAiB,GAAAJ,EAAA,CAAAI,EAAA,SAAA,CAAA,EACoC,OAAAlB,EAAA,OAAAA,EAAA,CAGtD,CACE,UAAA,IAAA,KACsB,QAAA,OACX,IAAA,WACJ,CACP,EACF,aAAAS,EACU,YAAA,CAAA,CACA,GAChB,CAAAT,EAAAC,EAAAQ,EAAAK,CAAA,CAAA,EAGF,OAAAK,EAAA,IACEC,GAAC,CAAA,GAAAlB,GACK,KAAAmB,GAAA,MACuB,SAAAxB,EAAAsB,MAAAG,EAAAA,gBAAA,CAAA,GAAAL,EAAA,EAAAE,MAAAI,EAAAA,UAAA,CAAA,GAAAN,CAAA,CAAA,EAKsB,uBAAAb,EAGjD,oBAAAD,GACA,qBAAAK,EACA,kBAAAD,GACA,SAAAiB,GAAAzB,EAAAyB,CAAA,EAC8C,MAAAxB,CAC9C,CAAA,CACF,CAGN,EAEAL,EAAA,aAAA,CAA+B,aAAA,GACf,OAAA8B,CAEhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}